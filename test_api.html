<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Tester</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="bg-gray-100 p-10">

    <h1 class="text-3xl font-bold mb-10">NESO API Tester</h1>

    <div class="grid md:grid-cols-2 gap-10">
        
        <!-- Login Tester -->
        <div class="bg-white p-6 rounded shadow">
            <h2 class="text-xl font-bold mb-4">1. Test Login API</h2>
            <div class="mb-4">
                <input type="text" id="username" placeholder="Username" class="border p-2 w-full mb-2">
                <input type="password" id="password" placeholder="Password" class="border p-2 w-full mb-2">
                <button onclick="testLogin()" class="bg-blue-500 text-white px-4 py-2 rounded">Login</button>
            </div>
            <pre id="loginResult" class="bg-gray-800 text-green-400 p-4 rounded text-sm overflow-auto h-40">Response will appear here...</pre>
        </div>

        <!-- Order Tester -->
        <div class="bg-white p-6 rounded shadow">
            <h2 class="text-xl font-bold mb-4">2. Test Order API</h2>
            <div class="mb-4">
                <p class="text-sm text-gray-600 mb-2">Enter User ID (from login) and Car ID (e.g., 1)</p>
                <input type="number" id="userId" placeholder="User ID" class="border p-2 w-full mb-2">
                <input type="number" id="carId" placeholder="Car ID" class="border p-2 w-full mb-2">
                <button onclick="testOrder()" class="bg-green-500 text-white px-4 py-2 rounded">Place Order</button>
            </div>
            <pre id="orderResult" class="bg-gray-800 text-green-400 p-4 rounded text-sm overflow-auto h-40">Response will appear here...</pre>
        </div>
        
    </div>

    <div class="mt-10 bg-white p-6 rounded shadow">
        <h2 class="text-xl font-bold mb-4">3. Test Get Cars API</h2>
        <button onclick="testGetCars()" class="bg-purple-500 text-white px-4 py-2 rounded mb-4">Fetch All Cars</button>
        <pre id="carsResult" class="bg-gray-800 text-green-400 p-4 rounded text-sm overflow-auto h-60">Response will appear here...</pre>
    </div>

    <script>
        async function testLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const response = await fetch('api/login.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            });
            const data = await response.json();
            document.getElementById('loginResult').textContent = JSON.stringify(data, null, 2);
            
            if(data.success) {
                document.getElementById('userId').value = data.user_id;
            }
        }

        async function testOrder() {
            const user_id = document.getElementById('userId').value;
            const car_id = document.getElementById('carId').value;
            
            const response = await fetch('api/orders.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ user_id, car_id })
            });
            const data = await response.json();
            document.getElementById('orderResult').textContent = JSON.stringify(data, null, 2);
        }

        async function testGetCars() {
            const response = await fetch('api/cars.php');
            const data = await response.json();
            document.getElementById('carsResult').textContent = JSON.stringify(data, null, 2);
        }
    </script>
</body>
</html>
